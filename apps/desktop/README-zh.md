# 提示词增强器 - 桌面客户端说明文档

[English](README.md)

## 1. 产品概述

提示词增强器桌面客户端是基于 Electron 框架的跨平台应用程序，旨在为用户提供原生桌面体验。该应用程序将 Web 版本的提示词增强器功能打包为独立应用，支持 Windows、macOS 和 Linux 操作系统，无需浏览器即可使用全部功能。

**重要说明**：桌面客户端是作为与主项目结构完全独立的包设计的。虽然它使用编译后的 Web 资源，但它维护自己的依赖管理和构建系统，允许在不需要整个项目代码库的情况下进行独立开发和编译。

### 1.1 主要特点

- **原生应用体验**：作为独立桌面应用运行，无需浏览器
- **跨平台支持**：支持 Windows、macOS(x64/ARM64) 和 Linux
- **完整功能集成**：包含 Web 版本的所有功能
- **本地菜单与快捷键**：原生操作系统菜单和快捷键支持
- **离线可用**：支持本地存储数据，减少网络依赖
- **统一用户界面**：与 Web 版本保持一致的用户体验
- **独立架构**：作为独立包运行，具有专用的依赖管理

## 2. 技术架构

### 2.1 技术栈

- **桌面框架**：Electron 36.0.1
- **构建工具**：Electron-Builder 26.0.12
- **包管理器**：npm（注意：桌面客户端独立使用npm，与项目其余部分分开）
- **Web 前端**：React 19.1 + TypeScript
- **UI 框架**：Tailwind CSS 4.1
- **状态管理**：Zustand 5.0

### 2.2 项目结构

桌面客户端采用 Electron 框架封装 Web 应用，主要包含以下文件：

- **main.js**：Electron 主进程，负责窗口管理和菜单创建
- **preload.js**：预加载脚本，提供安全的进程间通信
- **electron-builder.json**：应用打包配置
- **package.json**：项目依赖和脚本配置（独立于主项目）
- **web/**：Web 应用的构建产物（从 web 项目导入）

### 2.3 与主项目的集成

桌面客户端：
- 使用 web 项目的编译输出
- 不与主项目共享依赖
- 维护自己的基于 npm 的依赖管理
- 在提供 web 构建产物的情况下可以独立开发和构建

## 3. 安装指南

### 3.1 系统要求

- **Windows**：Windows 10/11 (64位)
- **macOS**：macOS 10.15+ (Intel 或 Apple Silicon)
- **Linux**：支持 AppImage 的现代 Linux 发行版

### 3.2 安装步骤

#### Windows

1. 下载最新的 `.exe` 安装包
2. 双击安装包并按照安装向导进行安装
3. 安装完成后，在开始菜单中找到"提示词增强"并启动

#### macOS

1. 下载最新的 `.dmg` 文件
2. 打开 DMG 文件
3. 将"提示词增强"拖动到应用程序文件夹
4. 从启动台或应用程序文件夹启动

#### Linux

1. 下载最新的 `.AppImage` 文件
2. 赋予可执行权限：`chmod +x 提示词增强-*.AppImage`
3. 直接运行 AppImage 文件

### 3.3 更新方式

应用程序目前不包含自动更新功能，需要通过下载最新版本并重新安装来进行更新。

## 4. 功能详解

桌面客户端保留了 Web 版本的全部功能，并增加了桌面特有的功能：

### 4.1 核心功能

- **提示词增强**：利用 AI 模型优化原始提示词
- **提示词评估**：对提示词质量进行分析和评分
- **迭代优化**：基于具体方向进一步优化提示词
- **对比测试**：比较原始提示词和增强提示词的效果
- **版本历史**：记录和管理提示词的多个优化版本
- **多模型支持**：集成多种 AI 模型和自定义 API 接口

### 4.2 桌面特有功能

- **原生菜单**：提供与操作系统一致的菜单体验
- **窗口控制**：支持最小化、缩放和全屏操作
- **键盘快捷键**：支持系统标准快捷键
- **离线运行**：部分功能支持离线使用

## 5. 界面概览

桌面客户端的界面与 Web 版本保持一致，主要包括以下区域：

### 5.1 主界面

- **顶部导航**：提供"提示词增强"、"对比测试"、"历史记录"和"模型设置"四个主要功能区切换
- **内容区域**：根据当前选择的功能标签显示相应内容
- **底部状态栏**：显示版权信息

### 5.2 菜单结构

桌面版提供了原生操作系统菜单，包括：

- **应用菜单**（macOS）：包含隐藏、隐藏其他和退出选项
- **编辑菜单**：包含撤销、重做、剪切、复制、粘贴和全选
- **视图菜单**：包含重新加载、开发者工具、缩放控制和全屏切换
- **窗口菜单**：包含最小化、缩放和关闭窗口
- **帮助菜单**：包含关于信息

## 6. 使用指南

### 6.1 提示词增强流程

1. 启动桌面应用
2. 在"提示词增强"标签页中输入原始提示词
3. 选择系统提示词模板和 AI 模型
4. 点击"开始增强"按钮
5. 等待增强结果生成
6. 可选：手动编辑增强结果并保存为新版本
7. 可选：分析提示词质量得分
8. 可选：点击"继续迭代"进行进一步优化

### 6.2 对比测试流程

1. 切换到"对比测试"标签页
2. 输入测试内容（用户提示词）
3. 选择测试用的模型
4. 点击"运行测试"按钮
5. 查看和比较两侧的响应结果
6. 可选：打开/关闭 Markdown 渲染
7. 可选：最大化某一侧的响应查看

### 6.3 历史记录使用

1. 切换到"历史记录"标签页
2. 浏览历史提示词组
3. 点击"展开"查看详细信息
4. 切换版本查看不同的优化结果
5. 点击"加载此版本"将其加载到编辑器中
6. 可选：删除不需要的记录

### 6.4 模型配置

1. 切换到"模型设置"标签页
2. 编辑现有模型的 API 配置
3. 点击"添加"创建自定义 API 接口
4. 填写 API 密钥、基础 URL 和模型信息
5. 测试连接确认配置正确
6. 启用/禁用所需的模型

## 7. 开发指南

### 7.1 环境设置

开发环境要求：

- Node.js 18.17.0 或更高版本
- npm 包管理器（注意：桌面客户端特别使用 npm，而非 pnpm）
- Git

### 7.2 本地构建指南

#### 独立编译

当提供 web 构建资源时，桌面客户端可以独立于主项目进行编译：

1. 确保你有可用的 web 构建输出：
   ```bash
   # 方法 1：首先构建 web 项目（如果使用 monorepo，则从项目根目录）
   cd ../web
   pnpm build
   
   # 方法 2：如果可用，使用现有的构建产物
   ```

2. 导航到 desktop 目录（该目录独立于主项目）：
   ```bash
   cd desktop
   ```

3. 使用 npm（而非 pnpm）安装依赖：
   ```bash
   npm install
   ```

4. 开发模式运行：
   ```bash
   npm run dev
   ```

5. 构建应用：
   ```bash
   npm run build          # 构建所有平台
   npm run build:mac      # 构建 macOS 版本
   npm run build:win      # 构建 Windows 版本
   npm run build:linux    # 构建 Linux 版本
   ```

#### 依赖管理

由于 pnpm 和 Electron Builder 之间的兼容性问题，桌面客户端特意使用 npm 而非 pnpm：

- 所有依赖通过 npm 管理
- desktop 目录中的 package.json 完全独立
- 切勿在 desktop 目录内混合使用 pnpm 和 npm 命令

### 7.3 项目配置文件

- **electron-builder.json**：定义应用打包配置，包括应用 ID、产品名称、输出目录和平台特定设置
- **package.json**：定义项目依赖和脚本命令（独立于主项目）
- **.npmrc**：可选的 npm 配置，专用于桌面客户端

## 8. 故障排除

### 8.1 常见问题

1. **应用无法启动**
   - 检查系统是否满足最低要求
   - 尝试重新安装应用
   - 检查系统日志获取错误信息
2. **API 连接失败**
   - 验证 API 密钥是否正确
   - 检查网络连接状态
   - 确认 API 端点 URL 是否正确
   - 检查防火墙设置是否阻止了连接
3. **界面显示异常**
   - 尝试重新加载应用（视图菜单 -> 重新加载）
   - 检查系统显示设置是否兼容

### 8.2 性能优化

- 定期清理历史记录以提高应用响应速度
- 关闭不需要的模型以减少资源占用
- 使用本地分析而非 AI 分析可减少网络请求

## 9. 隐私与数据安全

- 所有 API 密钥和配置信息存储在本地
- 应用不会收集或上传用户数据
- 提示词和历史记录保存在本地存储中
- 与 AI 模型的通信直接从用户设备发起，不经过中间服务器

## 10. 未来规划

- 自动更新功能
- 离线 AI 模型支持
- 多语言界面
- 数据导入/导出功能
- 团队协作功能
- 云同步功能

------

© Hexart Studio 2025